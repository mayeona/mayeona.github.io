---
title: "MIUI 卡刷"
date: 2022-09-03T16:51:45+08:00
tags: [小米12pro,刷机,安卓,twrp]
categories: [玩机]
---

# 前言
众所周知 miui 变得越来越臃肿，且广告横行被戏称为广告ui。大陆版的 miui 系统附带了小米全家桶，往往会造成手机卡顿、耗电，我 8+3G 的手机内存都有些卡。
你可能觉得它不发热，那是因为小米云控，自动限制你的手机性能。当你边插电边玩王者的时候，它为了控制发热会限制帧率，画面自动限制到了 10 帧以下，这还不卡成 PPT？
再说说其他版本的 miui：台湾版、俄罗斯版、欧版(EEA)、全球版 等版本，除了没有小米全家桶外，广告都还是有一些的，而今天要说的重头戏就是 miui 欧版(EU)，下文简称EU版。
EU版[官网](https://xiaomi.eu)，特点是基于大陆版 miui 为底包，拥有完整谷歌服务，移除了小米全家桶，所以内存占用会比国行版少很多。 

注意，因为该网站已经屏蔽了大陆 ip，所以需要代理访问，注意下载 ROM 时需要开启全局代理，否则会下载很慢。

# 一、准备
## 1.1 系统解锁
解锁 bootloader
## 1.2 下载ROM
根据机型下载 ROM 包

# 二、刷机
找到自己的机型，如果提供的是线刷包，比较好刷。
但如果提供的是卡刷包，那就需要先刷入三方 recovery，一般是 TWRP。

# 三、刷入 TWRP
参考[官方教程](https://xiaomi.eu/community/threads/howto-install-recovery-image.66211/)，操作步骤：
注意：不用先将卡刷包复制进手机中，因为后面清除data分区时会清除掉手机的一切设置以及所有媒体文件，也就是刷机包也会清除掉。
1. 刷入 trwp。
   1.1 fastboot devices
   1.2 fastboot boot twrp.img
2. 永久刷入 trwp(由于新版的小米机子大都使用A/B分区，重启系统后会覆盖回 miui 默认的 recovery)。
   2.1 在"高级"选项中选择如刷当前TWRP
   2.2 在"重启"选项中选择"重启到recovery"
3. 清除data分区(如果是线刷版，data分区没有解密，twrp模式下无法将文件复制进手机中，都是密文不知道哪个文件是刷机包)
   3.1 在"清除"选项中选择"清除data分区"，输入"yes"(注意日志哦，可能会说你复制进手机的文件在/data/mdeia/ 目录下)
   3.2 在"重启"选项中选择"重启到recovery"
4. 复制刷机包到手机中(twrp 会自动挂载"MTP")
   4.1 直接在电脑上复制卡刷包 zip 文件进手机即可(如果电脑上能显示手机中的文件夹，则复制进去的文件在/sdcard/ 下面，否则就会在 /data/media/ 下面)。如果不能可以用 ADB 命令向手机推文件
   4.2 adb push c:\xx\update.zip /sdcard/  # 电脑文件推入手机
   4.3 adb pull /sdcard/xx c:\xx\ # 手机向电脑推入文件
5. 刷入 zip 文件
   5.1 选择"安装"选项，记得勾选刷完自动安装 twrp，否则就需要再执行上面 "永久刷入 trwp" 的步骤
   5.2 刷完后需要清楚 davlik 缓存，也就是双清
   5.3 完成后直接重启进入系统，接下来就是出厂设置
6. 刷入 magisk(必须在 twrp 中刷入 magisk。如果自己在系统中下载安装，然后使用修补 boot 的方式，那么重启手机后，依然会失效，此时进入 twrp 刷入 magisk 即可)
   6.1 重启至 recovery，在 twrp 下的 "高级"选项中，选择"安装magisk"
   6.2 重启至系统，点击 magisk 安装包，选择下载完整安装包，安装即可